# Requirements Archive: v1.0 MVP

**Archived:** 2026-02-10
**Milestone:** v1.0 MVP
**Core Value:** People can reliably discover who is at the same venue right now, with trustworthy proximity-based check-in.

## v1 Requirements — All Complete

### Check-in Trust

- [x] **CHKN-01**: User can check in only when server-side validation confirms they are within allowed venue proximity (50-100m policy)
  - *Outcome: check_in_to_place_v2 RPC enforces 100m via PostGIS ST_DWithin*
- [x] **CHKN-02**: User sees a clear denial reason when check-in fails (distance, stale location, cooldown, or suspicious movement)
  - *Outcome: Structured JSONB denial codes mapped to pt-BR messages client-side*
- [x] **CHKN-03**: User has at most one active check-in at a time, with automatic expiry after configured freshness window
  - *Outcome: RPC deactivates prior check-in; pg_cron auto-expires every 5 minutes*

### Same-Venue Discovery

- [x] **DISC-01**: User can see a here-now list of people currently checked in at the same venue with recency indicator
  - *Outcome: get_users_at_venue RPC returns checked_in_at; UI shows recency badges*
- [x] **DISC-02**: User can choose visibility mode for each check-in (public at venue, friends-only, private)
  - *Outcome: visibility column on check_ins with CHECK constraint; UI radio selector in check-in modal*
- [x] **DISC-03**: User never sees blocked users in discovery and roster views
  - *Outcome: Server RPC excludes blocked; client-side Set<string> filtering for optimistic consistency*

### Safety and Moderation

- [x] **SAFE-01**: User can block another user from venue roster and profile screens
  - *Outcome: Block action on profile and discover screens; Zustand store with O(1) lookup*
- [x] **SAFE-02**: User can report another user with a predefined reason and optional note
  - *Outcome: Report modal with REPORT_REASONS array; UNIQUE constraint prevents duplicates*

### Offer Experience

- [x] **OFFR-01**: User can unlock venue drink offers only after a valid active check-in
  - *Outcome: send_drink_offer_v2 SECURITY DEFINER RPC validates active check-in server-side*
- [x] **OFFR-02**: User can see offer status clearly (available, unlocked, expired, or unavailable)
  - *Outcome: Clear pt-BR offer state labels on discover screen with visual feedback*

### Notifications

- [x] **NOTF-01**: User can configure notification preferences by type (social activity vs venue offers)
  - *Outcome: notification_preferences table with per-category booleans; settings UI toggles*
- [x] **NOTF-02**: User receives only the notification categories they opted in to
  - *Outcome: should_notify_user SECURITY DEFINER RPC for server-side enforcement*

## v2 Requirements (Deferred)

### Discovery Intelligence

- **RANK-01**: User sees trust-first discovery ranking that prioritizes recency, reliability, and relevant social signals
- **PULS-01**: User can view a local crowd pulse by venue/time window

### Retention

- **MEMR-01**: User can view a private-first venue memory timeline of past check-ins

## Traceability — Final Status

| Requirement | Phase | Status |
|-------------|-------|--------|
| CHKN-01 | Phase 1 | ✅ Done |
| CHKN-02 | Phase 1 | ✅ Done |
| CHKN-03 | Phase 1 | ✅ Done |
| DISC-01 | Phase 2 | ✅ Done |
| DISC-02 | Phase 2 | ✅ Done |
| DISC-03 | Phase 3 | ✅ Done |
| SAFE-01 | Phase 3 | ✅ Done |
| SAFE-02 | Phase 3 | ✅ Done |
| OFFR-01 | Phase 4 | ✅ Done |
| OFFR-02 | Phase 4 | ✅ Done |
| NOTF-01 | Phase 4 | ✅ Done |
| NOTF-02 | Phase 4 | ✅ Done |

**Coverage:** 12/12 v1 requirements completed. 0 unmapped. 0 orphans.

---
*Requirements archived: 2026-02-10 after v1.0 milestone completion*
